http:
  routers:
    # Auth Service
    auth-service:
      rule: "Host(`api.localhost`) && PathPrefix(`/api/v1/auth`)"
      service: auth-service
      entryPoints:
        - web
      middlewares:
        - cors-headers

    # Students Service
    students-service:
      rule: "Host(`api.localhost`) && PathPrefix(`/api/v1/students`)"
      service: students-service
      entryPoints:
        - web
      middlewares:
        - cors-headers

    # Rooms Service
    rooms-service:
      rule: "Host(`api.localhost`) && PathPrefix(`/api/v1/rooms`)"
      service: rooms-service
      entryPoints:
        - web
      middlewares:
        - cors-headers

    # Check-in Service
    checkin-service:
      rule: "Host(`api.localhost`) && PathPrefix(`/api/v1/checkin`)"
      service: checkin-service
      entryPoints:
        - web
      middlewares:
        - cors-headers

    # Analytics Service
    analytics-service:
      rule: "Host(`api.localhost`) && PathPrefix(`/api/v1/analytics`)"
      service: analytics-service
      entryPoints:
        - web
      middlewares:
        - cors-headers

  services:
    auth-service:
      loadBalancer:
        servers:
          - url: "http://host.docker.internal:3000"

    students-service:
      loadBalancer:
        servers:
          - url: "http://host.docker.internal:3001"

    rooms-service:
      loadBalancer:
        servers:
          - url: "http://host.docker.internal:3002"

    checkin-service:
      loadBalancer:
        servers:
          - url: "http://host.docker.internal:3003"

    analytics-service:
      loadBalancer:
        servers:
          - url: "http://host.docker.internal:3004"

  middlewares:
    cors-headers:
      headers:
        accessControlAllowMethods:
          - GET
          - POST
          - PUT
          - DELETE
          - OPTIONS
          - PATCH
        accessControlAllowOriginList:
          - "http://localhost:5173"
          - "http://localhost:5174"
        accessControlAllowHeaders:
          - "*"
        accessControlAllowCredentials: true
        accessControlMaxAge: 3600
        addVaryHeader: true

